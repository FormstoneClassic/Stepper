/*
 * Stepper Plugin [Formstone Library]
 * @author Ben Plum
 * @version 0.1.5
 *
 * Copyright Â© 2013 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
 
if(jQuery)(function(b){function m(a){a=a||{};isMobile&&(a.trueMobile=!0,"undefined"===typeof a.mobile&&(a.mobile=!0));var g=b.extend({},e,a);return b(this).each(function(a){var c=b(this);if(!c.data("stepper")){var d=parseFloat(c.attr("min")),f=parseFloat(c.attr("max")),e=parseFloat(c.attr("step"))||1;c.addClass("stepper-input").wrap('<div class="stepper '+g.customClass+'" />').after('<span class="stepper-step up">Up</span><span class="stepper-step down">Down</span>');a=c.parent(".stepper");c.is(":disabled")&& a.addClass("disabled");c=b.extend({$stepper:a,$input:c,$steps:a.find(".stepper-steps"),min:void 0===typeof d||isNaN(d)?!1:d,max:void 0===typeof f||isNaN(f)?!1:f,step:void 0===typeof e||isNaN(e)?1:e},g);d=new String(c.step);d=-1<d.indexOf(".")?d.length-d.indexOf(".")-1:0;c.digits=d;a.on("mousedown.stepper",".stepper-step",c,n).data("stepper",c)}})}function n(a){a.preventDefault();a.stopPropagation();h();var g=a.data;g.$input.is(":disabled")||g.$stepper.hasClass("disabled")||(a=b(a.target).hasClass("up"), k(g,a,!0),b("body").on("mouseup.stepper",g,p))}function p(a){a.preventDefault();a.stopPropagation();h()}function k(a,b,e){var c=parseFloat(a.$input.val()),c=void 0===typeof c||isNaN(c)?0:c,d=c+(b?a.step:-a.step);!1!==a.min&&d<a.min&&(d=a.min);!1!==a.max&&d>a.max&&(d=a.max);d!=c&&(d=q(d,a.digits),a.$input.val(d).trigger("change"),c=d);e&&(f=setInterval(function(){k(a,b,!1)},125))}function h(){void 0!==typeof f&&(clearInterval(f),f=null);b("body").off(".stepper")}function q(a,b){var e=Math.pow(10,b); return Math.round(a*e)/e}isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||window.opera);var e={customClass:""},f=null,l={defaults:function(a){e=b.extend(e,a||{});return b(this)},disable:function(){return b(this).each(function(a){a=b(this);var e=a.parent(".stepper");a.attr("disabled","disabled");e.addClass("disabled")})},enable:function(){return b(this).each(function(a){a=b(this);var e=a.parent(".stepper");a.attr("disabled",null);e.removeClass("disabled")})}, destroy:function(){return b(this).each(function(a){a=b(this);a.parent(".stepper").off(".stepper").find(".stepper-step").remove();a.unwrap().removeClass("stepper-input")})}};b.fn.stepper=function(a){return l[a]?l[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==typeof a&&a?this:m.apply(this,arguments)}})(jQuery);